# [피싱체크](https://피싱체크.com)
 <img src="/Logos/icon4.png" width="300" height="300"/>
 
----------------------------

## 👩‍💻 Developers


<table>
 <tr>
  <td align="center">
      <a href="https://github.com/hy-glory">
        <img src="https://github.com/hy-glory.png" width="150" alt="김하영" />
      </a>
  </td>
  <td align="center">
      <a href="https://github.com/azbayor2">
        <img src="https://github.com/azbayor2.png" width="150" alt="한정연" />
      </a>
  </td>
 </tr>
 <tr>
  <td align="center">
      <a href="https://github.com/hy-glory">
        <b>김하영</b>
      </a>
    </td>
  <td align="center">
      <a href="https://github.com/azbayor2">
        <b>한정연</b>
      </a>
    </td>
 </tr>
 <td align="center">
      <span>Frontend<br>API 연동 및 데이터 수집</span>
    </td>
 <td align="center">
      <span>Backend<br>데이터 전처리 및 AI 개발</span>
    </td>
</table>
 
----------------------------

### 목차
 1. [라이선스](#1-라이선스)
 2. [소개](#2-소개)
 3. [기능](#3-기능)
 4. [사용시 주의사항](#4-사용시-주의사항)
 5. [사용 방법](#5-사용-방법)
 6. [설치 방법](#6-설치방법)
 7. [의존 라이브러리 라이선스](#7-의존-라이브러리-라이선스)

-----------------------------


### 1. 라이선스


이 프로젝트는 [MIT License](./LICENSE)를 따릅니다.  

즉, 누구나 이 소프트웨어와 소스 코드를 자유롭게 사용, 복제, 수정, 병합, 배포할 수 있으며  
상업적 용도로도 이용이 가능합니다.  

단, 아래 조건을 따라야 합니다:
- 저작권 표시와 라이선스 고지를 유지해야 합니다.  
- 본 소프트웨어는 "있는 그대로(AS IS)" 제공되며, 사용으로 인해 발생하는 문제에 대해  
  저작자나 기여자는 책임지지 않습니다.


---------------------



### 2. 소개


피싱체크는 사용자가 받은 연락이 실제인지 피싱인지 헷갈리는 상황에서 금융사기 위험도를 진단하고, 즉각적인 대응 방법을 안내하는 반응형 웹 앱 입니다.
다음 링크에서 확인해 볼 수 있습니다: [피싱체크](https://피싱체크.com)


------------------



### 3. 기능


피싱체크는 다음과 같은 기능을 제공합니다:
- 문자 분석을 통해 스미싱 여부 확인
- 문자화면 캡쳐 분석을 통해 스미싱 여부 확인
- 스미싱 수법을 알려주는 선택형 챗봇
- 스미싱 대처 설명서
- 새로운 종류의 스미싱 수법 관련하여 금융감독원의 '소비자경보' 공지사항 조회 (개발자 직접 수정 필요요)
- 각 금융기관의 전화번호
- 개발자에게 보내는 패드백


--------------------



### 4. 사용시 주의사항


위의 링크에서 제공된 사이트에서 모든 기능을 자유롭게 사용하실 수 있습니다. 단 웹 공격, 해킹 등 비정상적인 활동의 정황이 발견될 시 귀하의 ip 주소가 차단 될 수 있음을 알려드립니다.

제공하는 소스코드는 자유롭게 사용 가능하지만, 소스코드에 예외 처리가 안되어 있는 등 완전하지는 않습니다. __사용시 문제가 생길 수 있음을 유의 바라며__, 문제가 생길 시 [MIT License]에 의거하여 저희는 __사용에 있어서 생기는 문제들에 대한 책임을 지지 않습니다.__


---------------



### 5. 사용 방법


#### 사전 준비사항 (필독!!)
- 저희는 개발 및 배포를 __[Ubuntu Server 24.04.2]__ 환경에서 하였습니다. 가급적이면 Ubuntu 기반의 운영체제를 사용하시길 바랍니다.
- 서비스 배포를 위하여 ip주소를 할당 받은 서버가 있어야 하며, 443번 (https)와 80번 (http) 포트가 운영체제 방화벽 및 공유기에서 허용이 되어 있어야 합니다. 
- 공유기를 사용할 시, 공유기에서 포트 포워딩 설정을 하시길 바랍니다.
- 호스팅을 위해 개인 도메인이 필수로 보유하고 있어야 합니다. 다음을 도메인 설정의 DNS 레코드에 설정 바랍니다:
  - api.도메인.com (필수)
  - @.도메인.com (필수)
  - www.도메인.com (필수)
  - 기타 (선택, 추가 시 /Front/nginx/conf.d/ 폴더에 있는 gninx 구성 파일 및 /get-ssl.yml 파일을 수정하셔야 합니다)
- 저희는 금융감독원의 '소비자경보' 공지사항 페이지를 '금융감독원'측의 허가를 받고 '비영리'라는 전제로 배포하였습니다. 하지만 본 프로젝트는 오픈소스로, 이 부분을 공개하게 될 경우 저작권 침해의 소지가 있어, 관련 코드를 주석처리 하였습니다. 만약에 '금융감독원'에서 제공하는 공지사항을 사용하실 의향이 있으면 사전에 허가를 받고 사용하시길 바랍니다. 소스코드는 '/Back/Server/DB/pscheckDB.js' 의 'sync_db()' 함수를 수정하시면 되겠습니다. 



#### certbot 설정 (필독!!)

certbot은 ssl 관련 인증서를 발급 및 갱신을 해주는 도구 입니다. 인증서를 발급받기 위해서 certbot에서 자체적으로 발급받을 도메인에 대한 소유권 테스트를 하게 됩니다. 이를 위해서 다음 파일을 귀하의 도메인으로 수정해야 합니다 (수정 할 부분에 주석이 있고, 감싸고 있는 대괄호를 지우시길 바랍니다.)
 - [/get-ssl.yml](./get-ssl.yml)
 - [/Front/nginx/conf.d/default.conf](./Front/nginx/conf.d/default.conf)
 - [/Front/nginx/conf.d/init.conf](./Front/nginx/conf.d/init.conf)


#### 프론트 .env 파일 설정(웹페이지를 그대로 사용할 시 필독!!)

프론트 파일에서 .env 파일이 존재하는데, 보통 .env 파일에는 중요한 정보가 들어가기 때문에 깃 커밋을 하지 않습니다.
만약 사이트를 그대로 사용하실 의향이 있으시면 /Front/web/.env 파일에 다음을 추가합니다(없으면 새로 생성 합니다.)

```
NEXT_PUBLIC_API_URL=[https://api.도메인.com]
```


#### AI 설정 (필독!!)

피싱체크의 핵심 기능 중 하나는 AI를 이용하여 텍스트가 스미싱 문자인지 아닌지를 분석하는 것입니다. 이를 위해 개발자꼐서는 스미싱 문자를 분류하는 AI가 있어야 합니다. AI 관련 폴더는 다음에 위치시킵니다:
 - /Back/AI/py_module

위의 폴더에 __smishClassifier_v4.py__ 스크립트가 존재하고, 여기에 __test_eval(text)__ 함수가 존재합니다. __test_eval()__ 함수는 AI 결과인 __prediction (pred)__ 와 예측 확률인 __confidence (conf)__ 를 반환합니다. 개발자께서는 본인이 구현한 AI 파이프라인을 이 스크립트에 직접 구현하셔야 합니다.


#### 공지사항 설정 (필독!!)

본 피싱체크에서는 금융감독원에서 제공하는 '소비자경보'의 테이블을 DB에 저장하여 [피싱체크](https://피싱체크.com) 에서 조회할 수 있도록 구현했습니다. 그러나 저작권의 문제로 인해 관련 소스코드는 '주석'처리 한 상태로 공개했습니다.

개발자분께서는 기존에 사용하던 공지사항을, 혹은 다른 사이트의 정보를 사용을 원하실 수 있습니다. 기존의 공지사항을 사용하실 경우 사전에 '금융감독원'의 허가를 받으시길 바랍니다. 허가를 받으시면 주석을 지우시고 사용하시면 됩니다.

만약 다른 사이트의 공지사항의 크롤링을 원하시는 경우, (./DB/init.sql)에서 notices의 테이블 스키마를 변경하셔서 사용하시거나, 혹은 유지하여 사용하실 수 있습니다. 현재의 스키마는 번호, 제목, 링크, 생성시간(원 공지사항 게시물 기준)으로 구성되어 있습니다. 스키마를 변경하실 경우에는, 백엔드 부분은(/Back/Server/DB/pscheckDB.js)에서 'sync_db()' 함수를, 프론트엔드 부분은 (/Front/web/src/app/notice/components/)폴더의 파일들을 수정하시면 되겠습니다. 만약 스키마는 유지하시면, (/Back/Server/DB/pscheckDB.js)에서 'sync_db()' 함수에서 사이트를 크롤링하여 원하는 데이터를 찾아 DB에 저장하는 코드를 개발자분께서 구현하시면 되겠습니다.


#### 프론트 개발 깃허브 설정 (선택)

루트 폴더에 다음 쉘 스크립트가 있습니다: [websync.sh](./websync.sh)

저희는 프론트를 분리하여 별도의 레포지토리에서 작업하였습니다. 이렇게 하면 프론트 개발자는 백엔드 개발과의 혹시 모를 코드의 충동 없이 개발할 수 있지만, 서버에 수동으로 일일히 업데이트 해야하는 단점이 있습니다. 이를 해결하기 위해 websync.sh 스크립트를 작성했습니다.

이는 프론트의 레포지토리를 /temp 폴더에 clone 한 후, clone 한 파일을 /Front/web 폴더에 복사하여 프론트 개발을 서버에 업데이트 합니다.

사용하기 앞서서 websync.sh 에서 다음을 수정해야 합니다:
 - 깃 레포지토리 url
 - 깃 레포지토리 브랜치명

사용하기 위해서 우분투 bash에서 다음을 입력합니다:

```
sh websync.sh
```


여기까지 하셨으면 설치를 위한 단계는 끝났습니다.


-------------------------



### 6. 설치방법


설치 및 가동 방법은 굉장히 간단합니다. 루트 폴더에 다음 쉘 스크립트가 있습니다:
 - [run.sh](./run.sh)


개발자께서는 run.sh를 실행하시면 됩니다. run.sh 다음의 작업을 한번에 실행합니다:

 - 임시 컨테이너를 생성하여 ssl 인증서 발급
 - 컨테이너 빌드:
  - nginx (리버스 프록시)
  - certbot (ssl 인증서 자동 갱신)
  - MySQL DB 구축
  - Node.js 백엔드 서버 구축
  - Next.js 프론트엔드 서버 구축
  - AI 서버 구축


실행 방법은 Ubuntu bash 에서 다음을 입력합니다:

```
sh run.sh
```


설치 로그가 터미널에서 표시 될 것입니다. 오류가 생겼을 시 터미널의 로그를 참고하여 수정하시면 됩니다.


-----------



### 7. 의존 라이브러리 라이선스

저희 프로그램은 다음 라이브러리를 사용하고, 저희의 __"The MIT License"__ 와 충돌이 없음을 밝힙니다.

자세한 내용은 [LICENSES.md](/LICENSES.md) 를 참고 바랍니다.



